import React, { createContext, useContext, ReactNode } from 'react';\n\ninterface CVIContextType {\n  isConnected: boolean;\n  conversationId?: string;\n  status: 'idle' | 'connecting' | 'connected' | 'disconnected';\n  startConversation: () => void;\n  endConversation: () => void;\n}\n\nconst CVIContext = createContext<CVIContextType | undefined>(undefined);\n\ninterface CVIProviderProps {\n  children: ReactNode;\n  conversationId?: string;\n}\n\nexport const CVIProvider: React.FC<CVIProviderProps> = ({ \n  children, \n  conversationId \n}) => {\n  const [isConnected, setIsConnected] = React.useState(false);\n  const [status, setStatus] = React.useState<CVIContextType['status']>('idle');\n\n  const startConversation = React.useCallback(() => {\n    setStatus('connecting');\n    // Simulate connection\n    setTimeout(() => {\n      setIsConnected(true);\n      setStatus('connected');\n    }, 1000);\n  }, []);\n\n  const endConversation = React.useCallback(() => {\n    setStatus('disconnected');\n    setIsConnected(false);\n    setTimeout(() => {\n      setStatus('idle');\n    }, 500);\n  }, []);\n\n  const value: CVIContextType = {\n    isConnected,\n    conversationId,\n    status,\n    startConversation,\n    endConversation,\n  };\n\n  return (\n    <CVIContext.Provider value={value}>\n      <div data-testid=\"cvi-provider\">\n        {children}\n      </div>\n    </CVIContext.Provider>\n  );\n};\n\nexport const useCVI = (): CVIContextType => {\n  const context = useContext(CVIContext);\n  if (context === undefined) {\n    throw new Error('useCVI must be used within a CVIProvider');\n  }\n  return context;\n};\n\nexport default CVIProvider;"